<view class="page {{fadeClass}} {{fontScaleClass}}" style="background: {{theme.pageBg}}; --icf-blue: {{theme.heroFrom}}; --icf-gold: {{theme.accentFrom}}; --icf-blue-rgb: {{theme.heroRgb}}; --icf-gold-rgb: {{theme.accentRgb}};">
  <hero-header
    theme="{{theme}}"
    title="逐题复盘"
    right-text="{{showWrongOnly ? '显示全部' : '只看错题'}}"
    bind:right="toggleWrongOnly"
  />

  <scroll-view scroll-y style="height: calc(100vh - 240rpx);">
    <block wx:for="{{list}}" wx:key="id">
      <view class="question-card" wx:if="{{!showWrongOnly || item.wrong}}" bindtap="openDetail" data-id="{{item.id}}">
        <view class="card-content">
          <view class="title">{{item.title}}</view>
          
          <view class="status-row">
            <!-- Perfect Case -->
            <view wx:if="{{!item.wrong}}" class="badge badge-perfect">
              <text>★ 完美通过</text>
            </view>
            
            <!-- Error Cases: Show explicit status for Best/Worst -->
            <block wx:else>
               <view class="badge {{item.isBestCorrect ? 'badge-success' : 'badge-error'}}">
                 最佳 {{item.isBestCorrect ? '✓' : '✗'}}
               </view>
               <view class="badge {{item.isWorstCorrect ? 'badge-success' : 'badge-error'}} ml-12">
                 最差 {{item.isWorstCorrect ? '✓' : '✗'}}
               </view>
            </block>
          </view>
        </view>
        
        <!-- Chevron arrow for affordance -->
        <view class="chevron"></view>
      </view>
    </block>
    <view wx:if="{{list.length === 0}}" class="muted empty-hint">
      暂无复盘记录
    </view>
  </scroll-view>
</view>
